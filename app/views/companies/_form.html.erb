<%= form_with model: @company, html: { class: 'card p-3' } do |f| %>
  <!-- Action Dropdown - Top Right -->
  <div class="d-flex justify-content-end mb-3">
    <div class="dropdown">
      <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-ellipsis-v"></i>
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li>
          <button type="button" class="dropdown-item" onclick="document.getElementById('submit-btn').click();" style="border: none; background: none; width: 100%; text-align: left;">
            <i class="fas fa-save me-2"></i>Save Company
          </button>
        </li>
        <li><hr class="dropdown-divider"></li>
        <li>
          <%= link_to 'Cancel', companies_path, class: 'dropdown-item' %>
        </li>
      </ul>
    </div>
  </div>

  <!-- Company Information Section -->
  <div class="mb-4">
    <h5 class="mb-3 text-dark">Company Information</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <%= f.label :name, class: 'form-label' %>
        <%= f.text_field :name, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :email, class: 'form-label' %>
        <%= f.email_field :email, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :website, class: 'form-label' %>
        <%= f.text_field :website, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :territory, class: 'form-label' %>
        <%= f.text_field :territory, class: 'form-control' %>
      </div>
      <div class="col-md-4">
        <label class="form-label">Owner</label>
        <input type="text" class="form-control" value="<%= @company.user&.name || current_user&.name || 'Unknown' %>" readonly>
      </div>
    </div>
  </div>

  <!-- Address Section -->
  <div class="border-top pt-4">
    <h5 class="mb-3 text-dark">Address</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <%= f.label :street, class: 'form-label' %>
        <%= f.text_field :street, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :city, class: 'form-label' %>
        <%= f.text_field :city, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :state, class: 'form-label' %>
        <%= f.text_field :state, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :zip_code, class: 'form-label' %>
        <%= f.text_field :zip_code, class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <%= f.label :country, class: 'form-label' %>
        <%= f.text_field :country, class: 'form-control' %>
      </div>
    </div>
  </div>

  <!-- Hidden submit button for dropdown action -->
  <%= f.submit 'Save Company', id: 'submit-btn', style: 'display: none;' %>

<% end %>
